---
title: Message Threads
description: Get all the hooks you need for managing AI message threads with tambo.
---

Message threads are the core building block for creating interactive AI experiences with Tambo. They provide a structured way to manage conversations between users and AI.

Tambo provides hooks to easily interact with the current thread state and its messages, generation stage, and other values.

```tsx
import { useTamboThread } from "@tambo-ai/react";

const { thread } = useTamboThread();
```

This thread state value is updated automatically by tambo as user messages are sent, and as response messages from tambo are received.

### Sending thread messages

We recommend using the `useTamboThreadInput` hook to send messages to the thread.

```tsx
import { useTamboThreadInput } from "@tambo-ai/react";

const { value, setValue, submit } = useTamboThreadInput(contextKey);
```

The `contextKey` is developer generated and is used to identify the thread group.

The `value` is the value of the message that you want to send.

The `setValue` is the function that you can use to update the value of the message.

To send a user's message to tambo, you can use the `submit` function:

You can also pass in an optional `options` object to the `submit` function.

```tsx
setValue("What is the weather like today?");

await submit({
  streamResponse: true, // We recommend streaming the response to the user
});
```

import { Card, Cards } from "fumadocs-ui/components/card";

<Cards>
  <Card title="Streaming" href="/docs/concepts/streaming">
    Learn more about streaming.
  </Card>
</Cards>

You can use `isPending` and `error` to show a loading state or an error state:

```tsx
if (isPending) {
  return <div>Loading...</div>;
}
```

```tsx
if (error) {
  return <div>Error: {error.message}</div>;
}
```

You can also use the `sendThreadMessage` function to send messages to the thread:

```tsx
const { sendThreadMessage } = useTamboThread();

await sendThreadMessage("What is the weather like today?", {
  streamResponse: true,
});
```

### Showing thread messages and components

Since tambo keeps the thread state updated, all you need to do is show the thread's messages somewhere. If a message from tambo includes a component, it can be accessed with `message.renderedComponent`:

```tsx
const { thread } = useTamboThread()

...

thread.messages.map((message) => (
<div>
  <p>Sent by: {message.role}</p>
  <p>message text: {message.content[0]?.text}</p>
  <p>component: {message.renderedComponent}</p>
</div>
))
```

For canvas-style UIs where you want to display only the most recent component, you can walk backwards through the messages to find the latest one with a `renderedComponent`:

```tsx
const latestComponent = thread.messages
  .slice()
  .reverse()
  .find((message) => message.renderedComponent)?.renderedComponent;

...

<div>
  {latestComponent}
</div>
```

This approach is useful for building interactive canvases, dashboards, or any UI where you want to show the most up-to-date component state without displaying the full conversation history.

### Setting the current thread

By default, tambo will create a new thread for you and use that thread for the `thread` state value.

If you want to switch to another thread you can use the `switchCurrentThread` function:

```tsx
const { switchCurrentThread } = useTamboThread()

...

switchCurrentThread(threadId)
```

The `thread` state will be updated, and anywhere you are rendering the threads list of messages will now be showing the new thread's messages!
